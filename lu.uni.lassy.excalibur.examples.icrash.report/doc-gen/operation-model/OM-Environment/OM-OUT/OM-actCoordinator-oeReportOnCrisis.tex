\subsection{Operation Model for oeReportOnCrisis}

\label{OM-oeReportOnCrisis}


The \msrcode{oeReportOnCrisis} operation has the following properties:

	\begin{operationmodel}
	\addheading{Operation}
	\adddoublerow{oeReportOnCrisis}{sent to update the textual information available for a specific handled crisis.}

	\addrowheading{Parameters}
	\addnumbereddoublerow{}{AdtCrisisID: dtCrisisID}{the identification information used to determine the crisis to report on} 
	\addnumbereddoublerow{}{AdtComment: dtComment}{the textual information commenting the crisis} 
	\addnumbereddoublerow{}{AdtCrisisSendSmsFamily: ptBoolean}{the boolean value which determines whether system need to send sms messages to family members} 

	\addrowheading{Return type}
	\addsinglerow{ptBoolean}

	\addrowheading{Pre-Condition (protocol)}
	\addnumberedsinglerow{PreP}{the system is started}
	\addnumberedsinglerow{PreP}{the actor logged previously and did not log out ! (i.e. the associated ctCoordinator instance is considered logged)}
		
	\addrowheading{Pre-Condition (functional)}
	\addnumberedsinglerow{PreF}{it is supposed that there exist one crisis in the pre state having the given id.}

	\addrowheading{Post-Condition (functional)}
	\addnumberedsinglerow{PostF}{the comment attribute of the crisis instance having the given id is replaced by the given one.
	If AdtCrisisSendSmsFamily value equals true then the requesting actor is notified of this update and sending messages to family members.
	Else the requesting actor is just notified of this update. }
	\addnumberedsinglerow{PostF}{if AdtCrisisSendSmsFamily value equals true for each family phone number:
	if there is no ctHuman instance having same phone number and familyMember kind in the pre-state 
	then a new one is added in the post-state with given phone number and familyMember kind and is associated to the current communication company.
	else the pre-state one is chosen
	}
	\addnumberedsinglerow{PostF}{if AdtCrisisSendSmsFamily value equals true:
	a report is sent to the communication company for any human (family member) associated to the crisis (i.e. one family phone number, one acknowledgement).}

	\addrowheading{Post-Condition (protocol)}
	\addnumberedsinglerow{PostP}{ none}
	\end{operationmodel}



	
	
	
	





